#!/bin/bash

sed -i '/StrictHostKeyChecking/c StrictHostKeyChecking no' /etc/ssh/ssh_config

service sshd restart

cat <<EOF >> /home/vagrant/.ssh/id_rsa
-----BEGIN OPENSSH PRIVATE KEY-----
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
oKOctuz74EEAAAAHc2VydmVyMQECAwQ=
-----END OPENSSH PRIVATE KEY-----
EOF

cat <<EOF >> /root/.ssh/id_rsa
-----BEGIN OPENSSH PRIVATE KEY-----
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
oKOctuz74EEAAAAHc2VydmVyMQECAwQ=
-----END OPENSSH PRIVATE KEY-----
EOF

cat <<EOF >> /home/vagrant/.ssh/id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQChQukTLi4py65dR3UPXGdwZtCH+oEJZprnhTaxxTyAEdlirKClZJ4XmXOjVXHt2ZpUto8Wt2ZkTflXv6ZNn3/A8YZF2V1rO4T+PQNgQWsUHZjAJOMZ3RoemWpW+plVBD6VguZWYpDiJGT4J/tXF7c6h0OLZsN0cLWEbf53pePpnTjARmLbxmtc3p5S7KPkooF3auN5qPmLOuWbAPjhXLD6FKfSNIH5h4JGq5eUKqp4tpaVj3fRyREzWsN0s0NbyzfPUaKt17qRvFQBDQAa0eWy9as4xTp546GDi/WK8tNWXKEhBdcLSaj5vp2/8L8oUHgp1x7/2LF2gF61MEb3Wk4hXWy4th6r/FgCcUiPpS2IHcWeZua+tb+F6ymifjbc4VnmrgVlm2gnmU5QAdNc3AAMpQ2iiKOd1ly1ml3suyzNf1NVfC65T8lwrifLyo+IuGK81rWY/XQanmkGHjxyCiEiN2bQKEPHZGD7r8Z1C1Qadux0ho71C7QGhjJ1aYQw57H5OkgdPwxnrN/xCAC+JHeQi4VaGbdizvJ4QfryNyRYJZ5LbYPMK310cwQi6d8uLPFEILpVJphauR9eamSVtNiM/Qm67illRSPSuCRlkDmv5i4q2KGYaetvTnquTc52F/gMJV2ctOubJHKEficXhPUpaOs1cspJAeuZQg+/eIRmVw== server1
EOF

cat <<EOF >> /root/.ssh/id_rsa.pub
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQChQukTLi4py65dR3UPXGdwZtCH+oEJZprnhTaxxTyAEdlirKClZJ4XmXOjVXHt2ZpUto8Wt2ZkTflXv6ZNn3/A8YZF2V1rO4T+PQNgQWsUHZjAJOMZ3RoemWpW+plVBD6VguZWYpDiJGT4J/tXF7c6h0OLZsN0cLWEbf53pePpnTjARmLbxmtc3p5S7KPkooF3auN5qPmLOuWbAPjhXLD6FKfSNIH5h4JGq5eUKqp4tpaVj3fRyREzWsN0s0NbyzfPUaKt17qRvFQBDQAa0eWy9as4xTp546GDi/WK8tNWXKEhBdcLSaj5vp2/8L8oUHgp1x7/2LF2gF61MEb3Wk4hXWy4th6r/FgCcUiPpS2IHcWeZua+tb+F6ymifjbc4VnmrgVlm2gnmU5QAdNc3AAMpQ2iiKOd1ly1ml3suyzNf1NVfC65T8lwrifLyo+IuGK81rWY/XQanmkGHjxyCiEiN2bQKEPHZGD7r8Z1C1Qadux0ho71C7QGhjJ1aYQw57H5OkgdPwxnrN/xCAC+JHeQi4VaGbdizvJ4QfryNyRYJZ5LbYPMK310cwQi6d8uLPFEILpVJphauR9eamSVtNiM/Qm67illRSPSuCRlkDmv5i4q2KGYaetvTnquTc52F/gMJV2ctOubJHKEficXhPUpaOs1cspJAeuZQg+/eIRmVw== server1
EOF

echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQChQukTLi4py65dR3UPXGdwZtCH+oEJZprnhTaxxTyAEdlirKClZJ4XmXOjVXHt2ZpUto8Wt2ZkTflXv6ZNn3/A8YZF2V1rO4T+PQNgQWsUHZjAJOMZ3RoemWpW+plVBD6VguZWYpDiJGT4J/tXF7c6h0OLZsN0cLWEbf53pePpnTjARmLbxmtc3p5S7KPkooF3auN5qPmLOuWbAPjhXLD6FKfSNIH5h4JGq5eUKqp4tpaVj3fRyREzWsN0s0NbyzfPUaKt17qRvFQBDQAa0eWy9as4xTp546GDi/WK8tNWXKEhBdcLSaj5vp2/8L8oUHgp1x7/2LF2gF61MEb3Wk4hXWy4th6r/FgCcUiPpS2IHcWeZua+tb+F6ymifjbc4VnmrgVlm2gnmU5QAdNc3AAMpQ2iiKOd1ly1ml3suyzNf1NVfC65T8lwrifLyo+IuGK81rWY/XQanmkGHjxyCiEiN2bQKEPHZGD7r8Z1C1Qadux0ho71C7QGhjJ1aYQw57H5OkgdPwxnrN/xCAC+JHeQi4VaGbdizvJ4QfryNyRYJZ5LbYPMK310cwQi6d8uLPFEILpVJphauR9eamSVtNiM/Qm67illRSPSuCRlkDmv5i4q2KGYaetvTnquTc52F/gMJV2ctOubJHKEficXhPUpaOs1cspJAeuZQg+/eIRmVw== server1" >> /home/vagrant/.ssh/authorized_keys
echo "ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAACAQChQukTLi4py65dR3UPXGdwZtCH+oEJZprnhTaxxTyAEdlirKClZJ4XmXOjVXHt2ZpUto8Wt2ZkTflXv6ZNn3/A8YZF2V1rO4T+PQNgQWsUHZjAJOMZ3RoemWpW+plVBD6VguZWYpDiJGT4J/tXF7c6h0OLZsN0cLWEbf53pePpnTjARmLbxmtc3p5S7KPkooF3auN5qPmLOuWbAPjhXLD6FKfSNIH5h4JGq5eUKqp4tpaVj3fRyREzWsN0s0NbyzfPUaKt17qRvFQBDQAa0eWy9as4xTp546GDi/WK8tNWXKEhBdcLSaj5vp2/8L8oUHgp1x7/2LF2gF61MEb3Wk4hXWy4th6r/FgCcUiPpS2IHcWeZua+tb+F6ymifjbc4VnmrgVlm2gnmU5QAdNc3AAMpQ2iiKOd1ly1ml3suyzNf1NVfC65T8lwrifLyo+IuGK81rWY/XQanmkGHjxyCiEiN2bQKEPHZGD7r8Z1C1Qadux0ho71C7QGhjJ1aYQw57H5OkgdPwxnrN/xCAC+JHeQi4VaGbdizvJ4QfryNyRYJZ5LbYPMK310cwQi6d8uLPFEILpVJphauR9eamSVtNiM/Qm67illRSPSuCRlkDmv5i4q2KGYaetvTnquTc52F/gMJV2ctOubJHKEficXhPUpaOs1cspJAeuZQg+/eIRmVw== server1" >> /root/.ssh/authorized_keys

chown vagrant.vagrant /home/vagrant/.ssh/id_rsa
chmod 600 /home/vagrant/.ssh/id_rsa
chown vagrant.vagrant /home/vagrant/.ssh/id_rsa.pub
chmod 600 /home/vagrant/.ssh/id_rsa.pub
chown root.root /root/.ssh/id_rsa
chmod 600 /root/.ssh/id_rsa
chown root.root /root/.ssh/id_rsa.pub
chmod 600 /root/.ssh/id_rsa.pub
